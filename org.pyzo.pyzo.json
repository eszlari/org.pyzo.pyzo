{
  "app-id" : "org.pyzo.pyzo",
  "runtime" : "org.kde.Platform",
  "runtime-version" : "5.9",
  "sdk" : "org.kde.Sdk",
  "command" : "pyzo",
  "finish-args" : [
    "--share=ipc",
    "--socket=x11",
    "--share=network",
    "--device=dri",
    "--socket=wayland",
    "--filesystem=host",
    "--filesystem=xdg-config/kdeglobals:ro",
    "--filesystem=xdg-run/dconf",
    "--talk-name=com.canonical.AppMenu.Registrar",
    "--talk-name=com.canonical.AppMenu.Registrar.*"
  ],
  "modules" : [
    {
      "name" : "pyqt5",
      "config-opts" : [
        "--disable-static",
        "--enable-x11"
      ],
      "no-autogen" : true,
      "buildsystem" : "simple",
      "build-commands" : [
        "python3 configure.py --assume-shared --confirm-license --no-designer-plugin --no-qml-plugin --sysroot=/app -w --sip=/app/bin/sip --sip-incdir=/app/include -verbose QMAKE_CFLAGS_RELEASE='-I/usr/include/python3.5m/' QMAKE_CXXFLAGS_RELEASE='-I/usr/include/python3.5m/'",
        "make -j `nproc`",
        "make install DESTDIR=/app"
      ],
      "sources" : [
        {
          "type" : "archive",
          "url" : "https://sourceforge.net/projects/pyqt/files/PyQt5/PyQt-5.9.2/PyQt5_gpl-5.9.2.tar.gz",
          "sha256" : "c190dac598c97b0113ca5e7a37c71c623f02d1d713088addfacac4acfa4b8394"
        }
      ],
      "modules" : [
        {
          "name" : "sip",
          "sources" : [
            {
              "type" : "archive",
              "url" : "https://sourceforge.net/projects/pyqt/files/sip/sip-4.19.7/sip-4.19.7.tar.gz",
              "sha256" : "25b50d29dd4b72965e7980c41e3320e460eff481a177beeddebf8c3be84b8cde"
            }
          ],
          "buildsystem" : "simple",
          "build-commands" : [
            "python3 configure.py --bindir=/app/bin --destdir=/app/lib/python3.5/site-packages --incdir=/app/include --pyidir=/app/lib/python3.5/site-packages --sipdir=/app/share/sip",
            "make",
            "make install"
          ],
          "cleanup" : [
            "/bin",
            "/include"
          ]
        }
      ]
    },
    {
      "name" : "python3-pyzo",
      "buildsystem" : "simple",
      "build-commands" : [
        "pip3 install --no-index --find-links=\"file://${PWD}\" --prefix=${FLATPAK_DEST} pyzo",
        "install -Dm644 org.pyzo.pyzo128x128.png /app/share/icons/hicolor/128x128/apps/org.pyzo.pyzo.png",
        "install -Dm644 org.pyzo.pyzo64x64.png /app/share/icons/hicolor/64x64/apps/org.pyzo.pyzo.png",
        "install -Dm644 org.pyzo.pyzo.desktop /app/share/applications/org.pyzo.pyzo.desktop",
        "install -Dm644 org.pyzo.pyzo.appdata.xml /app/share/appdata/org.pyzo.pyzo.appdata.xml"
      ],
      "sources" : [
        {
          "type" : "file",
          "path" : "org.pyzo.pyzo.desktop"
        },
        {
          "type" : "file",
          "path" : "org.pyzo.pyzo.appdata.xml"
        },
        {
          "type" : "file",
          "path" : "org.pyzo.pyzo64x64.png"
        },
        {
          "type" : "file",
          "path" : "org.pyzo.pyzo128x128.png"
        },
        {
          "type" : "file",
          "url" : "https://files.pythonhosted.org/packages/c1/fa/600b6da5de096a2da838f81aeac042310ad78660f250ea1b9f85435a808f/pyzo-4.6.0.tar.gz",
          "sha256" : "8c39363bec2d549f48c6569f7780a0e9b4cb64e80cf4f88b295080dca64252dd"
        }
      ]
    }
  ]
}
